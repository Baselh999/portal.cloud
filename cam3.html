<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒØ§Ù…ÙŠØ±Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ© - Ø¨Ø¯ÙˆÙ† Ø¶ØºØ·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        video {
            width: 90%;
            max-width: 800px;
            border: 5px solid #333;
            border-radius: 15px;
            margin-top: 20px;
        }
        .msg {
            font-size: 22px;
            color: #333;
            margin: 20px;
        }
        .error {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø³ØªØ´ØªØºÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§...</h1>
    <p class="msg">Ø§Ù†ØªØ¸Ø± Ø«ÙˆØ§Ù†ÙŠØŒ Ø³ÙŠØ·Ù„Ø¨ Ù…Ù†Ùƒ Ø§Ù„Ø¥Ø°Ù† Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</p>
    <video id="video" autoplay playsinline muted></video>
    <p class="msg" id="status"></p>

    <script>
        // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ù…Ø¬Ø±Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        (async () => {
            const video = document.getElementById('video');
            const status = document.getElementById('status');

            try {
                status.textContent = "Ø¬Ø§Ø±ÙŠ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù†...";
                status.style.color = "#0066cc";

                // Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ (ÙÙŠØ¯ÙŠÙˆ ÙÙ‚Ø·)
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        facingMode: "user"  // Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© (ØºÙŠÙ‘Ø±Ù‡Ø§ Ø¥Ù„Ù‰ "environment" Ù„Ù„Ø®Ù„ÙÙŠØ©)
                    } 
                });

                video.srcObject = stream;
                status.textContent = "Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØªØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†! ğŸ‰";
                status.style.color = "green";

            } catch (err) {
                status.textContent = "ÙØ´Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ğŸ˜”";
                status.classList.add("error");
                console.error("Ø®Ø·Ø£:", err);

                // Ø±Ø³Ø§Ø¦Ù„ ØªÙˆØ¶ÙŠØ­ÙŠØ© Ø´Ø§Ø¦Ø¹Ø©
                if (err.name === "NotAllowedError") {
                    status.textContent += " (Ø±ÙØ¶Øª Ø§Ù„Ø¥Ø°Ù† Ø£Ùˆ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø¨Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¢Ø®Ø±)";
                } else if (err.name === "NotFoundError") {
                    status.textContent += " (Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØ§Ù…ÙŠØ±Ø§ ÙÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø²)";
                }
            }
        })();
    </script>
</body>
</html>
